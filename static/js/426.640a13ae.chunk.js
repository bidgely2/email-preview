"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[426],{426:function(e,t,n){n.r(t),n.d(t,{EventManagementRoutes:function(){return Et}});var a=n(7689),i=n(4841),r=n(587),s=n(9439),o=n(2101),l=n(3896),d=n(890),c=n(2791),u=n(1677),h=n(5423),x=n(7630),g=n(1473),v=n(3721),m=n(3967),p=n(5818),E=n(1889),T=n(5819),j=n(9355),C=n(7355),Z={root:"EventsContainer_root__bwSNr",contentHeader:"EventsContainer_contentHeader__bAbfg",viewEvents:"EventsContainer_viewEvents__V7oIK",eventCount:"EventsContainer_eventCount__thBf5",loadingCont:"EventsContainer_loadingCont__1pIYu"},_=n(1413),f=n(3994),b=n(5422),D=n(9891),S=n(3400),y=n(7621),N=n(9281),I=n(9836),A=n(6890),P=n(5855),M=n(3382),L={root:"EventCard_root__iEVXE",cardHeader:"EventCard_cardHeader__gUpES",menuItem:"EventCard_menuItem__tphwB",dateContainer:"EventCard_dateContainer__CX02Y",date:"EventCard_date__3-Mil",datePlaceholderCont:"EventCard_datePlaceholderCont__SqKm7",eventStart:"EventCard_eventStart__cLs9j",commHeader:"EventCard_commHeader__X6NrY",alertStatus:"EventCard_alertStatus__VDQHG"},O=n(2898),w=n(9e3),U=n(6430),R=n(1131),k=n(4281),B=n(7247),F=n(3889),G=n(2034),V=n(5671),W=n(3144),H=function(){function e(t,n){(0,V.Z)(this,e),this.rc=t,this.onTickCb=n,this.timeRemaining=0}return(0,W.Z)(e,[{key:"init",value:function(e){this.timeRemaining=e-(new Date).getTime(),this.timeRemaining<=0?this.complete():this.start()}},{key:"start",value:function(){var e=this;this.onTick();var t=setInterval((function(){e.timeRemaining-=1e3,e.timeRemaining<0?(e.complete(),clearInterval(t)):e.onTick()}),1e3)}},{key:"complete",value:function(){this.onTickCb(this.getTime(),!0)}},{key:"onTick",value:function(){this.onTickCb(this.getTime(),!1)}},{key:"getTime",value:function(){return this.rc.dateUtils.getDurationObject(this.timeRemaining)}}]),e}(),z=n(4165),Y=n(5861),J=n(8550),K=n(9157),X=n(3239),Q=n(4004),q="EventDeleteDialog_loadingCont__4n3mJ",$="EventDeleteDialog_footerCont__T0sZ8",ee="EventDeleteDialog_btnCont__DHZjE",te=n(8946),ne=n(370),ae=n(144),ie=n(184),re=((0,x.ZP)(J.Z)((function(e){e.theme;return{"& .MuiInputBase-input.Mui-disabled":{color:"rgba(0, 0, 0, 0.6)",WebkitTextFillColor:"unset"}}})),function(e){var t=(0,i.WS)().rc,n=t.translations,a=(0,c.useState)({loading:!1,data:null,error:null}),r=(0,s.Z)(a,2),o=r[0],l=o.loading,h=o.data,x=o.error,g=r[1],v=function(){var n=(0,Y.Z)((0,z.Z)().mark((function n(){var a,i;return(0,z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return g({loading:!0,error:null,data:null}),a={pilotId:t.session.getPilotId(),eventId:e.scheduledEvent.eventId,campaignType:e.scheduledEvent.eventType},t.analytics.trackEvent("DELETE_EVENT_CONFIRM_CLICKED",{eventId:e.scheduledEvent.eventId}),n.next=5,T.l.deleteEvent(t,a);case 5:i=n.sent,g({loading:!1,error:i.error,data:i.data}),i.data&&setTimeout((function(){t.events.broadcast(ne.FP.RELOAD_SCHEDULED_EVENTS)}),2e3);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,ie.jsxs)(Q.hN,{onClose:e.handleClose,"aria-labelledby":"customized-dialog-title",open:e.open,children:[(0,ie.jsx)(Q.Cl,{title:n.getTranslation(u.w.POPUP.MESSAGE.CONFIRM_DELETE),onClose:e.handleClose}),(0,ie.jsx)(K.Z,{children:(0,ie.jsx)(ue,{mode:ce.DIALOG,scheduledEvent:e.scheduledEvent})}),(0,ie.jsx)(Q.BL,{children:(0,ie.jsx)("div",{className:$,children:l?(0,ie.jsxs)("div",{className:q,children:[(0,ie.jsx)(X.Z,{size:25,sx:{marginRight:"10px"}}),(0,ie.jsx)(d.Z,{children:n.getTranslation(u.w.POPUP.MESSAGE.DELETING)})]}):(0,ie.jsx)(ie.Fragment,{children:x?(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(d.Z,{sx:{marginBottom:"20px"},color:"error",children:x.message}),(0,ie.jsxs)("div",{className:ee,children:[(0,ie.jsx)(ae.QL,{sx:{minWidth:"180px"},onClick:e.handleClose,children:n.getTranslation(u.w.POPUP.BTN.CANCEL)}),(0,ie.jsx)(ae.gA,{sx:{minWidth:"180px"},type:"submit",children:n.getTranslation(u.w.POPUP.BTN.TRY_AGAIN)})]})]}):h?(0,ie.jsx)(ie.Fragment,{children:(0,ie.jsxs)("div",{className:q,children:[(0,ie.jsx)(te.Z,{color:"success",sx:{marginRight:"10px",marginBottom:"20px"}}),(0,ie.jsx)(d.Z,{color:"success",children:n.getTranslation(u.w.POPUP.MESSAGE.DELETED)})]})}):(0,ie.jsxs)("div",{className:ee,children:[(0,ie.jsx)(ae.QL,{sx:{minWidth:"180px"},onClick:v,children:n.getTranslation(u.w.POPUP.BTN.DELETE)}),(0,ie.jsx)(ae.gA,{sx:{minWidth:"180px"},onClick:e.handleClose,children:n.getTranslation(u.w.POPUP.BTN.CANCEL)})]})})})})]})}),se=n(1720),oe=(0,x.ZP)(g.Z)((function(e){return{background:e.theme.bglPalette.data_colors.eventCardCommunication_bg,padding:0,margin:0,marginTop:"10px",".MuiAccordionSummary-root":{padding:"0 10px"},"&:before":{display:"none"}}})),le=(0,x.ZP)(f.Z)((function(e){e.theme;return{border:"none"}})),de=(0,x.ZP)(f.Z)((function(e){e.theme;return{paddingTop:"10px",border:"none",whiteSpace:"normal",wordWrap:"break-word"}})),ce={CARD:"CARD",DIALOG:"DIALOG"},ue=function(e){var t=(0,i.WS)().rc,n=e.scheduledEvent,a=c.useState(null),r=(0,s.Z)(a,2),o=r[0],l=r[1],x=c.useState(!1),g=(0,s.Z)(x,2),E=g[0],T=g[1],j=(0,c.useState)({}),C=(0,s.Z)(j,2),Z=C[0],f=C[1],V=c.useState(!1),W=(0,s.Z)(V,2),z=W[0],Y=W[1],J=c.useState(""),K=(0,s.Z)(J,2),X=K[0],Q=K[1],q=Boolean(o),$=t.translations,ee=t.config.getConfig("EVENT_MANAGEMENT.PILOT_TIMEZONE")||Intl.DateTimeFormat().resolvedOptions().timeZone,te=t.dateUtils.getTimeDifference(Intl.DateTimeFormat().resolvedOptions().timeZone,ee),ne=(0,se.JO)(n.eventType)?[]:n.communications[0].alertList,ae=ne.length>0&&ne[0].dateEpoch>=((new Date).getTime()+18e5)/1e3||(0,se.JO)(n.eventType),ue=n.eventStatus===h.vC.EventStatus.SCHEDULED&&ae;(0,c.useEffect)((function(){var e=n.eventStatus===h.vC.EventStatus.ONGOING?1e3*n.endTimeEpoch:1e3*n.startTimeEpoch;new H(t,(function(e,t){Q(e.durStr)})).init(e)}),[]);var he=(0,m.Z)(),xe="event-menu",ge=(0,ie.jsxs)(b.Z,{sx:{marginLeft:"-15px"},anchorEl:o,anchorOrigin:{vertical:"bottom",horizontal:"right"},MenuListProps:{style:{padding:"0px"}},id:xe,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:q,onClose:function(){l(null)},children:[(0,ie.jsxs)(D.Z,{className:L.menuItem,onClick:function(){t.analytics.trackEvent("EDIT_EVENT_CLICKED",{}),l(null),T(!0)},children:[(0,ie.jsx)(S.Z,{size:"large","aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"primary",children:(0,ie.jsx)(w.Z,{})}),(0,ie.jsx)(d.Z,{variant:"bglBody2",sx:{paddingRight:"10px"},children:$.getTranslation(u.w.ACTIONS.EDIT)})]}),(0,ie.jsxs)(D.Z,{className:L.menuItem,onClick:function(){l(null);var a=new Date(1e3*e.scheduledEvent.startTimeEpoch),i=new Date(1e3*e.scheduledEvent.endTimeEpoch),r=1;t.dateUtils.getTimeOfDayMillis(a)>t.dateUtils.getTimeOfDayMillis(i)&&r++;var s={mode:G.I.ADD,eventType:e.scheduledEvent.eventType,startDate:t.dateUtils.getSameTimeForFutureDay(a,1),endDate:t.dateUtils.getSameTimeForFutureDay(i,r),scheduledEvent:null};f(s),t.analytics.trackEvent("DUPLICATE_EVENT_CLICKED",(0,_.Z)((0,_.Z)({},s),{},{eventName:n.eventName})),T(!0)},children:[(0,ie.jsx)(S.Z,{size:"large","aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"primary",children:(0,ie.jsx)(F.Z,{})}),(0,ie.jsx)(d.Z,{variant:"bglBody2",sx:{paddingRight:"10px"},children:$.getTranslation(u.w.ACTIONS.DUPLICATE)})]}),ue&&(0,ie.jsxs)(D.Z,{className:L.menuItem,onClick:function(){t.analytics.trackEvent("DELETE_EVENT_MENU_ITEM_CLICKED",{eventId:e.scheduledEvent.eventId,eventName:e.scheduledEvent.eventName}),l(null),Y(!0)},children:[(0,ie.jsx)(S.Z,{size:"large","aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"primary",children:(0,ie.jsx)(B.Z,{})}),(0,ie.jsx)(d.Z,{variant:"bglBody2",sx:{paddingRight:"10px"},children:$.getTranslation(u.w.ACTIONS.DELETE)})]})]});return(0,ie.jsxs)(y.Z,{variant:"outlined",className:L.root,children:[(0,ie.jsxs)("div",{className:L.cardHeader,children:[(0,ie.jsx)(d.Z,{noWrap:!0,component:"div",variant:"bglSubtitle4",children:n.eventName}),e.mode===ce.CARD&&(0,ie.jsx)(S.Z,{size:"large","aria-label":"show more","aria-controls":xe,"aria-haspopup":"true",onClick:function(e){l(e.currentTarget)},color:"primary",sx:{marginRight:"-15px"},children:(0,ie.jsx)(O.Z,{})})]}),ge,(0,ie.jsxs)("div",{className:L.dateContainer,style:{border:"1px solid ".concat(he.bglPalette.data_colors.pastEventTable_border)},children:[(0,ie.jsxs)("div",{className:"".concat(L.date),style:{borderRight:"1px solid ".concat(he.bglPalette.data_colors.pastEventTable_border)},children:[(0,ie.jsx)(d.Z,{component:"div",variant:"bglCaption1",color:he.palette.text.secondary,children:$.getTranslation(u.w.DATE.START)}),(0,ie.jsx)(d.Z,{component:"div",variant:"bglBody4",children:t.dateUtils.formatDate(t.dateUtils.addMinutesToDate(new Date(1e3*n.startTimeEpoch),te),"MMM dd, yyyy hh:mm a")})]}),(0,ie.jsxs)("div",{className:L.date,children:[(0,ie.jsx)(d.Z,{component:"div",variant:"bglCaption1",color:he.palette.text.secondary,children:$.getTranslation(u.w.DATE.END)}),(0,ie.jsx)(d.Z,{component:"div",variant:"bglBody4",children:t.dateUtils.formatDate(t.dateUtils.addMinutesToDate(new Date(1e3*n.endTimeEpoch),te),"MMM dd, yyyy hh:mm a")})]})]}),e.mode===ce.CARD&&(0,ie.jsxs)(d.Z,{className:L.eventStart,variant:"bglBody2",sx:{marginTop:"15px"},children:[(0,ie.jsx)(U.Z,{color:"primary",sx:{marginRight:"5px"}}),n.eventStatus===h.vC.EventStatus.ONGOING?$.getTranslation(u.w.EVENT_ENDS_IN):$.getTranslation(u.w.EVENT_STARTS_IN),(0,ie.jsx)(d.Z,{variant:"bglSubtitle3",sx:{marginLeft:"5px"},children:X})]}),!(0,se.JO)(n.eventType)&&(0,ie.jsxs)(oe,{defaultExpanded:e.mode===ce.DIALOG,disableGutters:!0,elevation:0,children:[(0,ie.jsx)(p.Z,{className:L.commSummary,expandIcon:(0,ie.jsx)(R.Z,{}),children:(0,ie.jsxs)(d.Z,{className:L.commHeader,variant:"bglCaption1",color:he.palette.text.secondary,children:[(0,ie.jsx)(k.Z,{sx:{height:"20px",marginRight:"5px"}}),$.getTranslation(u.w.COMMUNICATIONS.TITLE)]})}),(0,ie.jsx)(v.Z,{sx:{padding:0},children:(0,ie.jsx)(N.Z,{children:(0,ie.jsxs)(I.Z,{size:"small",children:[(0,ie.jsx)(A.Z,{children:(0,ie.jsxs)(P.Z,{children:[(0,ie.jsx)(le,{children:(0,ie.jsx)(d.Z,{variant:"bglCaption1",color:he.palette.text.secondary,children:$.getTranslation(u.w.COMMUNICATIONS.FIELDS.EMAIL)})}),(0,ie.jsx)(le,{children:(0,ie.jsx)(d.Z,{variant:"bglCaption1",color:he.palette.text.secondary,children:$.getTranslation(u.w.COMMUNICATIONS.FIELDS.DATE)})}),(0,ie.jsx)(le,{children:(0,ie.jsx)(d.Z,{variant:"bglCaption1",color:he.palette.text.secondary,children:$.getTranslation(u.w.COMMUNICATIONS.FIELDS.STATUS)})})]})}),(0,ie.jsx)(M.Z,{children:n.communications[0].alertList.map((function(e,n){return(0,ie.jsxs)(P.Z,{children:[(0,ie.jsx)(de,{children:(0,ie.jsx)(d.Z,{variant:"bglCaption1",children:$.getTranslation(e.alertType)})}),(0,ie.jsx)(de,{children:(0,ie.jsx)(d.Z,{variant:"bglCaption1",children:t.dateUtils.formatDate(t.dateUtils.addMinutesToDate(new Date(1e3*e.dateEpoch),te),"MMM dd, yyyy hh:mm a")})}),(0,ie.jsx)(de,{children:(0,ie.jsx)("span",{className:"".concat(L.alertStatus),style:{backgroundColor:"".concat(he.bglPalette.data_colors["alertStatus_".concat(e.status.toLowerCase())])},children:(0,ie.jsx)(d.Z,{variant:"bglCaption1",color:he.palette.primary.contrastText,children:$.getTranslation(u.w.EVENT_STATUS[e.status])})})})]},n)}))})]})})})]}),E?(0,ie.jsx)(G.B,(0,_.Z)({scheduledEvent:n,mode:G.I.EDIT,open:E,handleClose:function(e,n){e&&t.analytics.trackEvent(e,{reason:n}),n&&"backdropClick"===n||T(!1)}},Z)):(0,ie.jsx)(ie.Fragment,{}),z?(0,ie.jsx)(re,{scheduledEvent:n,open:z,handleClose:function(){Y(!1)}}):(0,ie.jsx)(ie.Fragment,{})]})},he=n(5549),xe=n(3058),ge="EventsDataError_errorCont__5rdwL",ve="EventsDataError_errorHeading__xgqJV",me="EventsDataError_errorDesc__Bm2-c",pe="EventsDataError_errorIcon__kMZEA";var Ee=n.p+"static/media/no_data.d26011d2d9ae2d1526ea2c2ad4f9cb94.svg",Te=function(e){var t=(0,m.Z)();return(0,ie.jsxs)("div",{className:ge,children:[e.noData?(0,ie.jsx)("img",{src:Ee,alt:"No events"}):(0,ie.jsx)(xe.Z,{className:pe,color:"error"}),(0,ie.jsx)(d.Z,{className:ve,variant:"bglSubtitle1",children:e.title}),(0,ie.jsx)(d.Z,{className:me,variant:"bglBody2",color:t.palette.text.secondary,children:e.subTitle}),e.cta&&(0,ie.jsx)(ae.gA,{onClick:e.cta.callback,sx:{marginTop:"20px"},children:e.cta.title})]})},je=n(4691),Ce=(0,x.ZP)(g.Z)((function(e){e.theme;return{width:"100%",background:"none",padding:0,margin:0,".MuiAccordionSummary-root":{padding:"0 10px"},"&:before":{display:"none"}}})),Ze=(0,x.ZP)(v.Z)((function(e){e.theme;return{"&.MuiAccordionDetails-root":{minHeight:"300px",display:"flex",alignItems:"center",justifyContent:"center"}}})),_e=function(e){var t,n=(0,i.WS)().rc,a=n.translations,r=e.eventStatus,o=e.eventType,l=(0,c.useState)(0),h=(0,s.Z)(l,2),x=h[0],g=h[1],v=(0,c.useState)(r===j.vC.EventStatus.ONGOING),_=(0,s.Z)(v,2),f=_[0],b=_[1],D=(0,c.useState)(!1),S=(0,s.Z)(D,2),y=S[0],N=S[1],I={pilotId:n.session.getPilotId(),eventType:o,eventStatus:r,timezoneOffsetMins:n.dateUtils.getTimezoneOffset()},A=(0,m.Z)();(0,c.useEffect)((function(){r===j.vC.EventStatus.SCHEDULED&&n.events.subscribe(ne.FP.RELOAD_SCHEDULED_EVENTS,(function(){g(++x)})),r===j.vC.EventStatus.ONGOING&&n.events.subscribe(ne.FP.RELOAD_ONGOING_EVENTS,(function(){g(++x)}))}),[r]);var P=(0,he.u)(T.l.fetchEvents,n,I,[x]),M=P.data,L=P.error,O=P.isLoading;(0,c.useEffect)((function(){M&&0===M.length&&!y&&f&&b(!1)}),[M,y,f]);return(0,ie.jsx)("div",{className:"".concat(Z.root," ").concat(Z[r.toLowerCase()]),children:(0,ie.jsx)("div",{className:Z.contentHeader,children:(0,ie.jsxs)(Ce,{disableGutters:!0,elevation:0,expanded:f,onChange:function(e,t){return function(e){y||N(!0),b(e)}(t)},sx:{backgroundColor:"".concat(A.bglPalette.data_colors["".concat(r.toLowerCase(),"_bg")]),border:"1px solid ".concat(A.bglPalette.data_colors["".concat(r.toLowerCase(),"_border")])},children:[(0,ie.jsx)(p.Z,{expandIcon:(0,ie.jsx)(C.Z,{}),children:(0,ie.jsxs)(d.Z,{noWrap:!0,component:"div",sx:{typography:{md:"bglSubtitle3",xs:"body2"}},children:[a.getTranslation(null===(t=u.w[r])||void 0===t?void 0:t.TITLE)," ",L?(0,ie.jsx)(ie.Fragment,{}):(0,ie.jsxs)(d.Z,{component:"span",variant:"bglBody1",color:A.palette.text.secondary,children:["(",null===M||void 0===M?void 0:M.length,")"]})]})}),(0,ie.jsx)(Ze,{children:O?(0,ie.jsx)(je.I,{className:Z.loadingCont}):L||0===(null===M||void 0===M?void 0:M.length)?(0,ie.jsx)(Te,{noData:0===(null===M||void 0===M?void 0:M.length),title:L?a.getTranslation(u.w.ERROR.TITLE):a.getTranslation(u.w.NO_DATA.TITLE),subTitle:L?a.getTranslation(u.w.ERROR.SUBTEXT):a.getTranslation(u.w.NO_DATA.SUBTEXT),cta:L?{title:a.getTranslation(u.w.ERROR.RELOAD),callback:function(){return g(++x)}}:void 0}):(0,ie.jsx)(E.ZP,{container:!0,spacing:{xs:1,md:3},columns:{xs:4,sm:8,md:12},children:null===M||void 0===M?void 0:M.map((function(e,t){return(0,ie.jsx)(E.ZP,{item:!0,xs:12,sm:4,md:4,children:(0,ie.jsx)(ue,{mode:ce.CARD,scheduledEvent:e})},t)}))})})]})})})},fe=n(8096),be=n(9321),De=n(3466),Se=function(e){var t=(0,i.WS)().rc,n=t.translations,a=t.config,r=JSON.parse(a.getConfig("EVENT_MANAGEMENT.SUPPORTED_CAMPAIGN_TYPES"));return(0,ie.jsx)(fe.Z,{children:(0,ie.jsx)(be.Z,{variant:"outlined",inputProps:{sx:{padding:"10px"}},id:"event-type-select",value:e.eventType,onChange:e.handleEventTypeChange,sx:{borderRadius:"30px"},startAdornment:(0,ie.jsx)(De.Z,{position:"start",children:(0,ie.jsxs)(d.Z,{variant:"bglCaption1",children:[n.getTranslation(u.w.EVENT_TYPE_TITLE),":"]})}),children:r.map((function(e){return(0,ie.jsx)(D.Z,{value:e,children:(0,ie.jsx)(d.Z,{variant:"bglBody2",children:n.getTranslation(u.w.EVENT_TYPE[e])})},e)}))})})},ye="ActiveEventsContainer_filterCont__-fL4Q",Ne=function(){var e=(0,c.useState)(h.vC.EventType.ALL),t=(0,s.Z)(e,2),n=t[0],a=t[1];return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)("div",{className:ye,children:(0,ie.jsx)(Se,{eventType:n,handleEventTypeChange:function(e){var t=e.target.value;a(t)}})}),(0,ie.jsx)(_e,{eventStatus:h.vC.EventStatus.ONGOING,eventType:n}),(0,ie.jsx)(_e,{eventStatus:h.vC.EventStatus.SCHEDULED,eventType:n})]})},Ie=n(4942),Ae=n(6151),Pe=n(8582),Me=n(3033),Le=n(6888),Oe=n(6571),we=n(9327),Ue="PastEventsContainer_filterCont__1vKyC",Re="PastEventsContainer_loadingCont__taHwk",ke="PastEventsContainer_disclaimerCont__cRymn",Be="PastEventsContainer_eventsCont__kAhb+",Fe=n(2636),Ge=n(2821),Ve=n(4554),We=n(2715),He=n(111);function ze(e){var t=e.count,n=e.page,a=e.rowsPerPage,i=e.onPageChange;return(0,ie.jsxs)(Ve.Z,{sx:{flexShrink:0,ml:2.5},children:[(0,ie.jsx)(S.Z,{onClick:function(e){i(e,0)},disabled:0===n,"aria-label":"first page",children:(0,ie.jsx)(We.Z,{})}),(0,ie.jsx)(S.Z,{onClick:function(e){i(e,n-1)},disabled:0===n,"aria-label":"previous page",children:(0,ie.jsx)(Fe.Z,{})}),(0,ie.jsx)(S.Z,{onClick:function(e){i(e,n+1)},disabled:n>=Math.ceil(t/a)-1,"aria-label":"next page",children:(0,ie.jsx)(Ge.Z,{})}),(0,ie.jsx)(S.Z,{onClick:function(e){i(e,Math.max(0,Math.ceil(t/a)-1))},disabled:n>=Math.ceil(t/a)-1,"aria-label":"last page",children:(0,ie.jsx)(He.Z,{})})]})}var Ye=n(7123),Je=function(e){return(0,ie.jsxs)(Q.hN,{onClose:e.handleClose,"aria-labelledby":"customized-dialog-title",open:e.open,children:[(0,ie.jsx)(Q.Cl,{title:"Event Details",onClose:e.handleClose}),(0,ie.jsx)(K.Z,{children:(0,ie.jsx)(ue,{mode:ce.DIALOG,scheduledEvent:e.scheduledEvent})}),(0,ie.jsx)(Ye.Z,{sx:{justifyContent:"center",marginBottom:"20px"},children:(0,ie.jsx)(ae.gA,{sx:{minWidth:"180px"},onClick:function(){e.onDuplicateCb()},children:"Duplicate"})})]})},Ke=(0,x.ZP)(Le.M)((function(e){var t=e.theme;return{".MuiInputBase-root":(0,Ie.Z)({borderRadius:"30px"},t.breakpoints.down("sm"),{marginTop:"20px"}),".MuiIconButton-root":{color:t.palette.primary.main},".MuiInputBase-input":{padding:"10px 15px"}}})),Xe=(0,x.ZP)(I.Z)((function(e){var t=e.theme;return{width:"calc(100% - 40px)",margin:"0px 20px",border:"1px solid ".concat(t.bglPalette.data_colors.pastEventTable_border)}})),Qe=(0,x.ZP)(f.Z)((function(e){var t=e.theme;return{border:"none",fontWeight:600,borderRight:"1px solid ".concat(t.bglPalette.data_colors.pastEventTable_border)}})),qe=(0,x.ZP)(f.Z)((function(e){var t=e.theme;return{border:"none",borderRight:"1px solid ".concat(t.bglPalette.data_colors.pastEventTable_border)}})),$e=(0,x.ZP)(P.Z)((function(e){var t=e.theme;return{"&:nth-of-type(odd)":{backgroundColor:t.bglPalette.data_colors.pastEventTableOddRow},"&:nth-last-of-type(1)":{borderBottom:"1px solid ".concat(t.bglPalette.data_colors.pastEventTable_border)}}})),et=function(){var e=(0,i.WS)().rc,t=e.translations,n=e.config.getConfig("EVENT_MANAGEMENT.PILOT_TIMEZONE")||Intl.DateTimeFormat().resolvedOptions().timeZone,a=e.dateUtils.getTimeDifference(Intl.DateTimeFormat().resolvedOptions().timeZone,n),r=(0,c.useState)(h.vC.EventType.ALL),o=(0,s.Z)(r,2),l=o[0],x=o[1],g=(0,c.useState)(new Date),v=(0,s.Z)(g,2),p=v[0],E=v[1],j=(0,c.useState)(0),C=(0,s.Z)(j,2),Z=C[0],b=C[1],D=(0,c.useState)(10),S=(0,s.Z)(D,2),y=S[0],I=S[1],L=(0,c.useState)(0),O=(0,s.Z)(L,2),w=O[0],U=O[1],R=(0,c.useState)(!1),k=(0,s.Z)(R,2),B=k[0],F=k[1],V=(0,c.useState)(),W=(0,s.Z)(V,2),H=W[0],z=W[1],Y=(0,c.useState)(!1),K=(0,s.Z)(Y,2),X=K[0],Q=K[1],q={pilotId:e.session.getPilotId(),date:e.dateUtils.formatDate(p,"MM-yyyy"),eventType:l,eventStatus:h.vC.EventStatus.COMPLETED,timezoneOffsetMins:e.dateUtils.getTimezoneOffset()},$=(0,he.u)(T.l.fetchEvents,e,q,[w]),ee=$.data,te=$.error,ne=$.isLoading,ae=function(e){z(e),F(!0)},re=Z>0?Math.max(0,(1+Z)*y-((null===ee||void 0===ee?void 0:ee.length)||0)):0,se=(0,m.Z)();return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsxs)("div",{className:Ue,children:[(0,ie.jsx)(Se,{eventType:l,handleEventTypeChange:function(e){var t=e.target.value;x(t)}}),(0,ie.jsx)(Oe._,{dateAdapter:we.H,children:(0,ie.jsx)(Ke,{inputFormat:"MMM yyyy",views:["year","month"],openTo:"month",disableFuture:!0,maxDate:new Date,value:p,onChange:function(t,n){try{if(null===t||!e.dateUtils.isValidDate(t)||t.getTime()>Date.now()||n&&n.length<8)return;E(t)}catch(te){}},renderInput:function(e){return(0,ie.jsx)(J.Z,(0,_.Z)({},e))}})})]}),(0,ie.jsx)("div",{className:ke,style:{backgroundColor:"".concat(se.bglPalette.data_colors.eventCardCommunication_bg)},children:(0,ie.jsx)(d.Z,{variant:"bglCaption1",children:t.getTranslation(u.w.PAST.DESCRIPTION)})}),(0,ie.jsx)("div",{className:Be,children:ne?(0,ie.jsx)(je.I,{className:Re}):te||0===(null===ee||void 0===ee?void 0:ee.length)?(0,ie.jsx)(Te,{noData:0===(null===ee||void 0===ee?void 0:ee.length),title:te?t.getTranslation(u.w.ERROR.TITLE):t.getTranslation(u.w.NO_DATA.PAST_EVENTS.TITLE),subTitle:te?t.getTranslation(u.w.ERROR.SUBTEXT):t.getTranslation(u.w.NO_DATA.PAST_EVENTS.SUBTEXT),cta:te?{title:t.getTranslation(u.w.ERROR.RELOAD),callback:function(){return U(++w)}}:void 0}):(0,ie.jsx)(N.Z,{children:(0,ie.jsxs)(Xe,{children:[(0,ie.jsx)(A.Z,{children:(0,ie.jsxs)(P.Z,{children:[(0,ie.jsx)(Qe,{children:(0,ie.jsx)(d.Z,{variant:"bglCaption2",children:t.getTranslation(u.w.PAST.FIELDS.NAME)})}),(0,ie.jsx)(Qe,{children:(0,ie.jsx)(d.Z,{variant:"bglCaption2",children:t.getTranslation(u.w.DATE.START)})}),(0,ie.jsx)(Qe,{children:(0,ie.jsx)(d.Z,{variant:"bglCaption2",children:t.getTranslation(u.w.DATE.END)})}),(0,ie.jsx)(Qe,{children:(0,ie.jsx)(d.Z,{variant:"bglCaption2",children:t.getTranslation(u.w.PAST.FIELDS.CREATED_ON)})}),(0,ie.jsx)(Qe,{children:(0,ie.jsx)(d.Z,{variant:"bglCaption2",children:t.getTranslation(u.w.PAST.FIELDS.ACTION)})})]})}),(0,ie.jsx)(M.Z,{children:(0,ie.jsxs)(ie.Fragment,{children:[(y>0?ee.slice(Z*y,Z*y+y):ee).map((function(n,i){return(0,ie.jsxs)($e,{children:[(0,ie.jsx)(qe,{children:(0,ie.jsx)(Ae.Z,{onClick:function(){return ae(n)},sx:{padding:0,minWidth:0,textTransform:"none"},variant:"text",children:(0,ie.jsx)(d.Z,{variant:"bglBody2",children:n.eventName})})}),(0,ie.jsx)(qe,{children:(0,ie.jsx)(d.Z,{variant:"bglBody2",children:e.dateUtils.formatDate(e.dateUtils.addMinutesToDate(new Date(1e3*n.startTimeEpoch),a),"MMM dd, yyyy hh:mm a")})}),(0,ie.jsx)(qe,{children:(0,ie.jsx)(d.Z,{variant:"bglBody2",children:e.dateUtils.formatDate(e.dateUtils.addMinutesToDate(new Date(1e3*n.endTimeEpoch),a),"MMM dd, yyyy hh:mm a")})}),(0,ie.jsx)(qe,{children:(0,ie.jsx)(d.Z,{variant:"bglBody2",children:e.dateUtils.formatDate(e.dateUtils.addMinutesToDate(new Date(1e3*n.creationTimeEpoch),a),"MMM dd, yyyy hh:mm a")})}),(0,ie.jsx)(qe,{children:(0,ie.jsx)(Ae.Z,{onClick:function(){return ae(n)},sx:{padding:0,minWidth:0,textTransform:"none"},variant:"text",children:(0,ie.jsx)(d.Z,{variant:"bglBody4",sx:{textDecoration:"underline"},children:t.getTranslation(u.w.PAST.DETAILS)})})})]},i)})),re>0&&(0,ie.jsx)(P.Z,{style:{height:53*re},children:(0,ie.jsx)(f.Z,{colSpan:6})})]})}),(0,ie.jsx)(Pe.Z,{children:(0,ie.jsx)(P.Z,{children:(0,ie.jsx)(Me.Z,{colSpan:6,count:ee.length,rowsPerPage:y,page:Z,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onPageChange:function(e,t){b(t)},onRowsPerPageChange:function(e){I(parseInt(e.target.value,10)),b(0)},ActionsComponent:ze})})})]})})}),B?(0,ie.jsx)(Je,{scheduledEvent:H,open:B,onDuplicateCb:function(){e.analytics.trackEvent("DUPLICATE_EVENT_CLICKED",{eventName:null===H||void 0===H?void 0:H.eventName,eventId:null===H||void 0===H?void 0:H.eventId}),F(!1),Q(!0)},handleClose:function(){F(!1)}}):(0,ie.jsx)(ie.Fragment,{}),X?(0,ie.jsx)(G.B,{mode:G.I.ADD,open:X,startDate:e.dateUtils.addDays(1e3*H.startTimeEpoch,e.dateUtils.getDayDiff(1e3*H.startTimeEpoch,Date.now())+1),endDate:e.dateUtils.addDays(1e3*H.endTimeEpoch,e.dateUtils.getDayDiff(1e3*H.endTimeEpoch,Date.now())+1),eventType:H.eventType,handleClose:function(e,t){t&&"backdropClick"===t||Q(!1)}}):(0,ie.jsx)(ie.Fragment,{})]})},tt="EventManagementDashboard_root__bD1lz",nt=function(){var e=(0,i.WS)().rc,t=(0,c.useState)(0),n=(0,s.Z)(t,2),a=n[0],r=n[1],h=e.translations,x=(0,c.useState)(!1),g=(0,s.Z)(x,2),v=g[0],m=g[1];return(0,ie.jsxs)("div",{className:tt,children:[(0,ie.jsxs)(o.Z,{value:a,onChange:function(e,t){return function(e){r(e),1!==a||v||m(!0)}(t)},children:[(0,ie.jsx)(l.Z,{label:(0,ie.jsx)(d.Z,{variant:"bglBody2",children:h.getTranslation(u.w.TAB_LABELS.ACTIVE)})}),(0,ie.jsx)(l.Z,{label:(0,ie.jsx)(d.Z,{variant:"bglBody2",children:h.getTranslation(u.w.TAB_LABELS.PAST)})})]}),(0,ie.jsx)("div",{hidden:0!==a,children:(0,ie.jsx)(Ne,{})}),1===a||v?(0,ie.jsx)("div",{style:{display:1!==a?"none":"block"},hidden:1!==a,children:(0,ie.jsx)(et,{})}):(0,ie.jsx)(ie.Fragment,{}),(0,ie.jsx)("div",{style:{height:"1px"}})]})},at="UserManagement_root__X07kk",it="UserManagement_userLoadTitle__WF28Q",rt="UserManagement_userLoadCardsContainer__brB2Y",st="UserManagement_userLoadCard__W4gpp",ot="UserManagement_loadingCont__Wwr0U",lt=n(9504),dt="USER_MANAGEMENT",ct={TITLE:"".concat(dt,".USER_LOAD.TITLE"),LAST_SYNC:"".concat(dt,".USER_LOAD.LAST_SYNC")},ut=n(4267),ht=(0,x.ZP)(y.Z)((function(e){return{backgroundColor:e.theme.bglPalette.primary[200],height:140}}));function xt(e){var t,n=(0,i.WS)().rc.translations,a=n.getTranslation("".concat(dt,".USER_LOAD.").concat(e.title.toUpperCase(),".TITLE")),r=n.getTranslation("".concat(dt,".USER_LOAD.").concat(e.tooltipMsg.toUpperCase(),".INFO"));return(0,ie.jsx)(ht,{children:(0,ie.jsxs)(lt.Z,{children:[(0,ie.jsx)("div",{children:(0,ie.jsx)(d.Z,{variant:"bglSubtitle2",sx:{lineHeight:"24px",fontWeight:600},children:a})}),(0,ie.jsx)("div",{style:{marginTop:5},children:(0,ie.jsx)(d.Z,{variant:"bglTitle2",children:null===(t=e.count)||void 0===t?void 0:t.toLocaleString()})}),r&&(0,ie.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:5,marginTop:5},children:[(0,ie.jsx)(ut.Z,{sx:{color:"#186CDD",fontSize:20}})," ",r]})]})})}var gt=n(3950),vt=n(1822),mt=function(){var e=(0,i.WS)().rc,t=e.translations,n=(0,m.Z)(),a=(0,c.useState)(void 0),r=(0,s.Z)(a,2),o=r[0],l=r[1],u=(0,c.useState)(""),h=(0,s.Z)(u,2),x=h[0],g=h[1],v=(0,c.useState)(0),p=(0,s.Z)(v,2),E=p[0],T=p[1],C={pilotId:e.session.getPilotId(),campaignType:j.vC.EventType.CPP},Z=(0,he.u)(vt.P.fetchUserLoad,e,C,[E]),f=Z.data,b=(Z.error,Z.isLoading);return(0,c.useEffect)((function(){f&&(g((new Date).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})+", "+(new Date).toLocaleDateString("en-GB")),l((0,se.RJ)(f)))}),[f]),(0,ie.jsx)(ie.Fragment,{children:(0,ie.jsxs)("div",{className:at,children:[(0,ie.jsxs)("div",{className:it,children:[(0,ie.jsx)(d.Z,{variant:"bglSubtitle4",sx:{fontWeight:600},color:n.bglPalette.foreground[500],children:t.getTranslation(ct.TITLE)}),f&&!b&&(0,ie.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,ie.jsxs)(d.Z,{variant:"bglBody2",sx:{height:20},color:n.bglPalette.foreground[400],children:[t.getTranslation(ct.LAST_SYNC)," ",x]}),"\xa0",(0,ie.jsx)(S.Z,{"aria-label":"refresh",onClick:function(){return T(++E)},children:(0,ie.jsx)(gt.Z,{sx:{fontSize:20}})})]})]}),b?(0,ie.jsx)(je.I,{className:ot}):(0,ie.jsx)("div",{className:rt,children:o&&["activeUsers","unsubscribed"].map((function(e){var t={title:e,count:o[e],tooltipMsg:e};return(0,ie.jsxs)("div",{className:st,children:[" ",(0,ie.jsx)(xt,(0,_.Z)({},t))," "]},e)}))})]})})},pt=function(){var e=(0,i.WS)().rc.config,t=JSON.parse(e.getConfig("EVENT_MANAGEMENT.EV.REALTIME_DASHBOARD")),n=JSON.parse(e.getConfig("EVENT_MANAGEMENT.USERMANAGEMENT_DASHBOARD"));return(0,ie.jsxs)(ie.Fragment,{children:[t&&(0,ie.jsx)(r.V,{}),n&&(0,ie.jsx)(mt,{}),(0,ie.jsx)(nt,{})]})},Et=function(){return(0,ie.jsxs)(a.Z5,{children:[(0,ie.jsx)(a.AW,{path:"",element:(0,ie.jsx)(a.Fg,{to:"dashboard",replace:!0})}),(0,ie.jsx)(a.AW,{path:"dashboard",element:(0,ie.jsx)(pt,{})})]})}}}]);
//# sourceMappingURL=426.640a13ae.chunk.js.map